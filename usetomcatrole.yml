---
- hosts: all
  become: true
  vars:
    tomcat_version: 8.5.5
    
    tomcat_permissions_production: True
    
    tomcat_users:
      - username: "tomcat"
        password: "t3mpp@ssw0rd"
        roles: "tomcat,admin,manager,manager-gui"
      - username: "admin"
        password: "admin"
        roles: "tomcat"        
  roles:
    - role: zaxos.tomcat-ansible-role
  tasks:
  - name: copy artifacts to tomcat
    get_url:
      url: s3://s3-artifacts-manasa/gameoflife-web/target/gameoflife.war
      dest: /opt/tomcat/webapps/gameoflife.war
      force_basic_auth: yes
      url_username: admin
      url_password: password
  - name: Touch the same file, but add/remove some permissions
    file:
      path: /opt/tomcat/webapps/gameoflife.war
      owner: root
      group: tomcat
      mode: 3192502
